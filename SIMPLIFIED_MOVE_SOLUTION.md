# –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —É–∑–ª–æ–≤

## ‚úÖ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ + –£–¥–∞–ª–µ–Ω–∏–µ

–í–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —É–∑–ª–æ–≤ –∏–∑ –¥–µ—Ä–µ–≤—å–µ–≤, —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è —Å—Ö–µ–º–∞:

### 1. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** (–≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –ù–∞—Ö–æ–¥–∏–º —É–∑–ª—ã –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–µ—Ä–µ–≤—å—è—Ö
- –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏–∏ —Å –Ω–æ–≤—ã–º–∏ ID (—Ä–∞–±–æ—Ç–∞—é—â–∞—è –ª–æ–≥–∏–∫–∞)
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–∑–ª—ã

### 2. **–£–¥–∞–ª–µ–Ω–∏–µ** (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è)
- –ü–û–°–õ–ï —É—Å–ø–µ—à–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –£–¥–∞–ª—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ —É–∑–ª—ã –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –û–±–Ω–æ–≤–ª—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: `copySelectedNodes`

```typescript
// –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∂–∏–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
for (const selectedNode of selectedNodes) {
  const sourceTree = sourceTreeData.find(tree => tree.treeId === selectedNode.treeId)
  if (sourceTree) {
    const fullNode = findNodeInTree(sourceTree.nodes, selectedNode.nodeId)
    if (fullNode) {
      const copiedNode = copyNodeRecursively(fullNode) // –ù–æ–≤—ã–µ ID
      copiedNodes.push(copiedNode)
    }
  }
}

// –ï—Å–ª–∏ —Ä–µ–∂–∏–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è - —É–¥–∞–ª—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ —É–∑–ª—ã –ü–û–°–õ–ï –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
if (moveMode && onUpdateTree) {
  for (const [treeId, nodeIds] of nodesByTree) {
    let updatedNodes = sourceTree.nodes
    for (const nodeId of nodeIds) {
      updatedNodes = removeNodeById(updatedNodes, nodeId) // –ü—Ä–æ—Å—Ç–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
    }
    await onUpdateTree(treeId, updatedNodes)
  }
}
```

### –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è: `removeNodeById`

```typescript
function removeNodeById(nodes: TreeNode[], nodeId: string): TreeNode[] {
  return nodes
    .filter(node => node.id !== nodeId) // –£–¥–∞–ª—è–µ–º —É–∑–µ–ª —Å –Ω—É–∂–Ω—ã–º ID
    .map(node => {
      if (node.children && node.children.length > 0) {
        return { ...node, children: removeNodeById(node.children, nodeId) }
      }
      return node
    })
}
```

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### 1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ - –ø—Ä–æ—Å—Ç–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ù–µ—Ç —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —É–∑–ª–æ–≤

### 2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ï—Å–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - –∫–æ–ø–∏–∏ —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ù–µ —Ç–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–±–æ—è—Ö

### 3. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏**
- ‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ - –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- ‚úÖ –£–±—Ä–∞–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ú–µ–Ω—å—à–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –†–µ–∂–∏–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (üìã)
1. –°–æ–∑–¥–∞–µ—Ç –∫–æ–ø–∏–∏ —É–∑–ª–æ–≤ —Å –Ω–æ–≤—ã–º–∏ ID
2. –ò—Å—Ö–æ–¥–Ω—ã–µ —É–∑–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ

### –†–µ–∂–∏–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (‚úÇÔ∏è)
1. –°–æ–∑–¥–∞–µ—Ç –∫–æ–ø–∏–∏ —É–∑–ª–æ–≤ —Å –Ω–æ–≤—ã–º–∏ ID
2. –£–¥–∞–ª—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ —É–∑–ª—ã –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
3. = **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ**

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** –≤ `chrome://extensions`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: üìã + üîó‚áß
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ**: ‚úÇÔ∏è + üîó‚áß

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–≤—É—Ö –ø—Ä–æ—Å—Ç—ã—Ö –∏ –Ω–∞–¥–µ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π!

## üìù –£–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–¥

- ‚ùå `extractMultipleNodes` - —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- ‚ùå `extractNode` - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º  
- ‚ùå `getAllNodeIds` - –∏–∑–±—ã—Ç–æ—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥

- ‚ûï `removeNodeById` - –ø—Ä–æ—Å—Ç–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ ID
- ‚ûï –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ `copySelectedNodes`
- ‚ûï –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏